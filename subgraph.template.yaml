specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: HooksFactory
    network: {{NetworkName}}
    source:
      address: "{{HooksFactoryAddress}}"
      abi: HooksFactory
      startBlock: {{HooksFactoryStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LenderHooksAccess
        - AccessControlHooks
        - AccessControlHooksProvider
        - HooksConfig
        - RoleProviderUpdated
        - RoleProviderAdded
        - RoleProviderRemoved
        - AccountBlockedFromDeposits
        - AccountUnblockedFromDeposits
        - AccountMadeFirstDeposit
        - AccountAccessGranted
        - AccountAccessRevoked
        - HooksFactory
        - HooksTemplate
        - HooksInstanceDeployed
        - HooksTemplateAdded
        - HooksTemplateDisabled
        - HooksTemplateFeesUpdated
      abis:
        - name: HooksFactory
          file: ./abis/HooksFactory.json
        - name: WildcatMarket
          file: ./abis/WildcatMarket.json
        - name: IERC20
          file: ./abis/IERC20.json
        - name: AccessControlHooks
          file: ./abis/AccessControlHooks.json
      eventHandlers:
        - event: ChangedSpherexEngineAddress(address,address)
          handler: handleChangedSpherexEngineAddress
        - event: ChangedSpherexOperator(address,address)
          handler: handleChangedSpherexOperator
        - event: HooksInstanceDeployed(address,address)
          handler: handleHooksInstanceDeployed
        - event: HooksTemplateAdded(address,string,address,address,uint80,uint16)
          handler: handleHooksTemplateAdded
        - event: HooksTemplateDisabled(address)
          handler: handleHooksTemplateDisabled
        - event: HooksTemplateFeesUpdated(address,address,address,uint80,uint16)
          handler: handleHooksTemplateFeesUpdated
        - event: MarketDeployed(indexed address,indexed address,string,string,address,uint256,uint256,uint256,uint256,uint256,uint256,uint256)
          handler: handleMarketDeployed
      file: ./src/hooks-factory.ts
  - kind: ethereum
    name: WildcatArchController
    network: {{NetworkName}}
    source:
      address: "{{WildcatArchControllerAddress}}"
      abi: WildcatArchController
      startBlock: {{WildcatArchControllerStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ArchController
        - RegisteredBorrower
        - BorrowerRegistrationChange
        - Controller
        - ControllerAdded
        - ControllerRemoved
        - ControllerFactory
        - ControllerFactoryAdded
        - ControllerFactoryRemoved
        - HooksFactory
        - Market
        - MarketAdded
        - MarketRemoved
        - ParameterConstraints
        - OwnershipHandoverCanceled
        - OwnershipHandoverRequested
        - OwnershipTransferred
      abis:
        - name: WildcatArchController
          file: ./abis/WildcatArchController.json
        - name: WildcatMarketControllerFactory
          file: ./abis/WildcatMarketControllerFactory.json
        - name: HooksFactory
          file: ./abis/HooksFactory.json
        - name: AccessControlHooks
          file: ./abis/AccessControlHooks.json
      eventHandlers:
        - event: BorrowerAdded(address)
          handler: handleBorrowerAdded
        - event: BorrowerRemoved(address)
          handler: handleBorrowerRemoved
        - event: ControllerAdded(indexed address,address)
          handler: handleControllerAdded
        - event: ControllerFactoryAdded(address)
          handler: handleControllerFactoryAdded
        - event: ControllerFactoryRemoved(address)
          handler: handleControllerFactoryRemoved
        - event: ControllerRemoved(address)
          handler: handleControllerRemoved
        - event: MarketAdded(indexed address,address)
          handler: handleMarketAdded
        - event: MarketRemoved(address)
          handler: handleMarketRemoved
        - event: OwnershipHandoverCanceled(indexed address)
          handler: handleOwnershipHandoverCanceled
        - event: OwnershipHandoverRequested(indexed address)
          handler: handleOwnershipHandoverRequested
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
      file: ./src/wildcat-arch-controller.ts
  - kind: ethereum
    name: WildcatSanctionsSentinel
    network: {{NetworkName}}
    source:
      address: "{{WildcatSanctionsSentinelAddress}}"
      abi: WildcatSanctionsSentinel
      startBlock: {{WildcatSanctionsSentinelStartBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NewSanctionsEscrow
        - SanctionOverride
        - SanctionOverrideRemoved
      abis:
        - name: WildcatSanctionsSentinel
          file: ./abis/WildcatSanctionsSentinel.json
      eventHandlers:
        - event: NewSanctionsEscrow(indexed address,indexed address,indexed address)
          handler: handleNewSanctionsEscrow
        - event: SanctionOverride(indexed address,indexed address)
          handler: handleSanctionOverride
        - event: SanctionOverrideRemoved(indexed address,indexed address)
          handler: handleSanctionOverrideRemoved
      file: ./src/wildcat-sanctions-sentinel.ts
templates:
  - kind: ethereum
    name: AccessControlHooks
    network: {{NetworkName}}
    source:
      abi: AccessControlHooks
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AccessControlHooks
        - LenderHooksAccess
        - AccessControlHooks
        - AccessControlHooksProvider
        - HooksConfig
        - RoleProviderUpdated
        - RoleProviderAdded
        - RoleProviderRemoved
        - AccountBlockedFromDeposits
        - AccountUnblockedFromDeposits
        - AccountMadeFirstDeposit
        - AccountAccessGranted
        - AccountAccessRevoked
      abis:
        - name: AccessControlHooks
          file: ./abis/AccessControlHooks.json
      eventHandlers:
        - event: AccountAccessGranted(indexed address,indexed address,uint32)
          handler: handleAccountAccessGranted
        - event: AccountAccessRevoked(indexed address)
          handler: handleAccountAccessRevoked
        - event: AccountBlockedFromDeposits(indexed address)
          handler: handleAccountBlockedFromDeposits
        - event: AccountMadeFirstDeposit(indexed address,indexed address)
          handler: handleAccountMadeFirstDeposit
        - event: AccountUnblockedFromDeposits(indexed address)
          handler: handleAccountUnblockedFromDeposits
        - event: MinimumDepositUpdated(address,uint128)
          handler: handleMinimumDepositUpdated
        - event: RoleProviderAdded(indexed address,uint32,uint24)
          handler: handleRoleProviderAdded
        - event: RoleProviderRemoved(indexed address,uint24)
          handler: handleRoleProviderRemoved
        - event: RoleProviderUpdated(indexed address,uint32,uint24)
          handler: handleRoleProviderUpdated
        - event: TemporaryExcessReserveRatioActivated(indexed address,uint256,uint256,uint256)
          handler: handleTemporaryExcessReserveRatioActivated
        - event: TemporaryExcessReserveRatioCanceled(indexed address)
          handler: handleTemporaryExcessReserveRatioCanceled
        - event: TemporaryExcessReserveRatioExpired(indexed address)
          handler: handleTemporaryExcessReserveRatioExpired
        - event: TemporaryExcessReserveRatioUpdated(indexed address,uint256,uint256,uint256)
          handler: handleTemporaryExcessReserveRatioUpdated
      file: ./src/access-control-hooks.ts
  - kind: ethereum
    name: WildcatMarketControllerFactory
    network: {{NetworkName}}
    source:
      abi: WildcatMarketControllerFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Controller
        - ControllerFactory
        - NewController
        - UpdateProtocolFeeConfiguration
      abis:
        - name: WildcatMarketControllerFactory
          file: ./abis/WildcatMarketControllerFactory.json
      eventHandlers:
        - event: NewController(address,address)
          handler: handleNewController
        - event: UpdateProtocolFeeConfiguration(address,uint16,address,uint256)
          handler: handleUpdateProtocolFeeConfiguration
      file: ./src/wildcat-market-controller-factory.ts
  - kind: ethereum
    name: WildcatMarketController
    network: {{NetworkName}}
    source:
      abi: WildcatMarketController
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Controller
        - LenderAuthorization
        - LenderAuthorizationChange
        - MarketDeployed
      abis:
        - name: WildcatMarketController
          file: ./abis/WildcatMarketController.json
        - name: WildcatMarket
          file: ./abis/WildcatMarket.json
        - name: IERC20
          file: ./abis/IERC20.json
      eventHandlers:
        - event: LenderAuthorized(address)
          handler: handleLenderAuthorized
        - event: LenderDeauthorized(address)
          handler: handleLenderDeauthorized
        - event: MarketDeployed(indexed address,string,string,address,uint256,uint256,uint256,uint256,uint256,uint256)
          handler: handleMarketDeployed
        - event: TemporaryExcessReserveRatioActivated(indexed address,uint256,uint256,uint256)
          handler: handleTemporaryExcessReserveRatioActivated
        - event: TemporaryExcessReserveRatioUpdated(indexed address,uint256,uint256,uint256)
          handler: handleTemporaryExcessReserveRatioUpdated
        - event: TemporaryExcessReserveRatioCanceled(indexed address)
          handler: handleTemporaryExcessReserveRatioCanceled
        - event: TemporaryExcessReserveRatioExpired(indexed address)
          handler: handleTemporaryExcessReserveRatioExpired
      file: ./src/wildcat-market-controller.ts
  - kind: ethereum
    name: WildcatMarket
    network: {{NetworkName}}
    source:
      abi: WildcatMarket
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LenderAccount
        - LenderInterestAccrued
        - MarketInterestAccrued
        - WithdrawalBatch
        - LenderWithdrawalStatus
        - Token
        - Market
        - DelinquencyStatusChanged
        - AnnualInterestBipsUpdated
        - Approval
        - AuthorizationStatusUpdated
        - Borrow
        - DebtRepaid
        - Deposit
        - FeesCollected
        - MarketClosed
        - MaxTotalSupplyUpdated
        - ReserveRatioBipsUpdated
        - SanctionedAccountAssetsSentToEscrow
        - SanctionedAccountWithdrawalSentToEscrow
        - StateUpdated
        - Transfer
        - WithdrawalBatchClosed
        - WithdrawalBatchCreated
        - WithdrawalBatchExpired
        - WithdrawalBatchPayment
        - WithdrawalExecution
        - WithdrawalRequest
        - LenderHooksAccess
        - AccessControlHooks
        - AccessControlHooksProvider
        - HooksConfig
        - RoleProviderUpdated
        - RoleProviderAdded
        - RoleProviderRemoved
        - AccountBlockedFromDeposits
        - AccountUnblockedFromDeposits
        - AccountMadeFirstDeposit
        - AccountAccessGranted
        - AccountAccessRevoked
        - HooksTemplate
        - HooksInstanceDeployed
        - HooksTemplateAdded
        - HooksTemplateDisabled
        - HooksTemplateFeesUpdated
      abis:
        - name: WildcatMarket
          file: ./abis/WildcatMarket.json
        - name: IERC20
          file: ./abis/IERC20.json
      eventHandlers:
        - event: AnnualInterestBipsUpdated(uint256)
          handler: handleAnnualInterestBipsUpdated
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: AuthorizationStatusUpdated(indexed address,uint8)
          handler: handleAuthorizationStatusUpdated
        - event: Borrow(uint256)
          handler: handleBorrow
        - event: ChangedSpherexEngineAddress(address,address)
          handler: handleChangedSpherexEngineAddress
        - event: ChangedSpherexOperator(address,address)
          handler: handleChangedSpherexOperator
        - event: DebtRepaid(indexed address,uint256)
          handler: handleDebtRepaid
        - event: Deposit(indexed address,uint256,uint256)
          handler: handleDeposit
        - event: FeesCollected(uint256)
          handler: handleFeesCollected
        - event: MarketClosed(uint256)
          handler: handleMarketClosed
        - event: MaxTotalSupplyUpdated(uint256)
          handler: handleMaxTotalSupplyUpdated
        - event: ReserveRatioBipsUpdated(uint256)
          handler: handleReserveRatioBipsUpdated
        - event: SanctionedAccountAssetsSentToEscrow(indexed address,address,uint256)
          handler: handleSanctionedAccountAssetsSentToEscrow
        - event: SanctionedAccountAssetsQueuedForWithdrawal(indexed address,uint256,uint256,uint256)
          handler: handleSanctionedAccountAssetsQueuedForWithdrawal
        - event: SanctionedAccountWithdrawalSentToEscrow(indexed address,address,uint32,uint256)
          handler: handleSanctionedAccountWithdrawalSentToEscrow
        - event: InterestAndFeesAccrued(uint256,uint256,uint256,uint256,uint256,uint256)
          handler: handleInterestAndFeesAccrued
        - event: StateUpdated(uint256,bool)
          handler: handleStateUpdated
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: WithdrawalBatchClosed(indexed uint256)
          handler: handleWithdrawalBatchClosed
        - event: WithdrawalBatchCreated(indexed uint256)
          handler: handleWithdrawalBatchCreated
        - event: WithdrawalBatchExpired(indexed uint256,uint256,uint256,uint256)
          handler: handleWithdrawalBatchExpired
        - event: WithdrawalBatchPayment(indexed uint256,uint256,uint256)
          handler: handleWithdrawalBatchPayment
        - event: WithdrawalExecuted(indexed uint256,indexed address,uint256)
          handler: handleWithdrawalExecuted
        - event: WithdrawalQueued(indexed uint256,indexed address,uint256,uint256)
          handler: handleWithdrawalQueued
      file: ./src/wildcat-market.ts
